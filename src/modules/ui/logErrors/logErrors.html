<template>
    <template lwc:if={isOpen}>
        <section
            aria-label="Errors"
            class="slds-popover slds-nubbin_bottom-left"
            role="dialog"
        >
            <button
                class="slds-button slds-button_icon slds-button_icon slds-button_icon-small slds-float_right slds-popover__close"
                onclick={closePopover}
                title="Close errors panel"
            >
                <svg class="slds-button__icon" aria-hidden="true">
                    <use
                        xlink:href="/public/assets/icons/utility-sprite/svg/symbols.svg#close"
                    ></use>
                </svg>
                <span class="slds-assistive-text">Close dialog</span>
            </button>
            <div class="slds-popover__body err-body">
                <template lwc:if={hasErrors}>
                    <template for:each={errors} for:item="err">
                        <p
                            key={err.line}
                            class="slds-line-clamp slds-m-bottom_small"
                            title={err.message}
                        >
                            {err.id}. Error at&nbsp;
                            <button
                                class="slds-button line-btn"
                                onclick={onLineClick}
                                data-line={err.line}
                            >
                                line {err.line}</button
                            >&nbsp;<strong class="err-event"
                                >{err.errEvent}:</strong
                            >&nbsp; {err.message}
                        </p>
                    </template></template
                >
                <template lwc:else>
                    <p class="slds-m-bottom_small">No errors found</p>
                </template>
            </div>
        </section>
    </template>
</template>
